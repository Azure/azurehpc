# NHC Configuration File
#
# Lines are in the form "<hostmask>||<check>"
# Hostmask is a glob, /regexp/, or {noderange}
# Comments begin with '#'
#
# This file was automatically generated by nhc-genconf
# Fri Jun 17 15:26:28 UTC 2022
#

#######################################################################
###
### NHC Configuration Variables
###
# * || export MARK_OFFLINE=1 NHC_CHECK_ALL=0


#######################################################################
###
### DMI Checks
###
# * || check_dmi_data_match -h 0x0000 -t 0 "BIOS Information: Version: Hyper-V UEFI Release v4.1"
# * || check_dmi_data_match -h 0x0001 -t 1 "System Information: Version: Hyper-V UEFI Release v4.1"
# * || check_dmi_data_match -h 0x0002 -t 3 "Chassis Information: Version: Hyper-V UEFI Release v4.1"
# * || check_dmi_data_match -h 0x0003 -t 2 "Base Board Information: Version: Hyper-V UEFI Release v4.1"
# * || check_dmi_data_match -h 0x0004 -t 4 "Processor Information: Version: AMD EPYC 7V73X 64-Core Processor               "
# * || check_dmi_data_match -h 0x0004 -t 4 "Processor Information: Max Speed: 3525 MHz"
# * || check_dmi_data_match -h 0x0004 -t 4 "Processor Information: Current Speed: 1850 MHz"
# * || check_dmi_data_match -h 0x0005 -t 4 "Processor Information: Version: AMD EPYC 7V73X 64-Core Processor               "
# * || check_dmi_data_match -h 0x0005 -t 4 "Processor Information: Max Speed: 3525 MHz"
# * || check_dmi_data_match -h 0x0005 -t 4 "Processor Information: Current Speed: 1850 MHz"
# * || check_dmi_data_match -h 0x0008 -t 17 "Memory Device: Speed: Unknown"
# * || check_dmi_data_match -h 0x0008 -t 17 "Memory Device: Configured Memory Speed: Unknown"
# * || check_dmi_data_match -h 0x0008 -t 17 "Memory Device: Firmware Version: Not Specified"
# * || check_dmi_data_match -h 0x000B -t 17 "Memory Device: Speed: Unknown"
# * || check_dmi_data_match -h 0x000B -t 17 "Memory Device: Configured Memory Speed: Unknown"
# * || check_dmi_data_match -h 0x000B -t 17 "Memory Device: Firmware Version: Not Specified"
# * || check_dmi_data_match -h 0x000E -t 17 "Memory Device: Speed: Unknown"
# * || check_dmi_data_match -h 0x000E -t 17 "Memory Device: Configured Memory Speed: Unknown"
# * || check_dmi_data_match -h 0x000E -t 17 "Memory Device: Firmware Version: Not Specified"
# * || check_dmi_data_match -h 0x0011 -t 17 "Memory Device: Speed: Unknown"
# * || check_dmi_data_match -h 0x0011 -t 17 "Memory Device: Configured Memory Speed: Unknown"
# * || check_dmi_data_match -h 0x0011 -t 17 "Memory Device: Firmware Version: Not Specified"
# * || check_dmi_data_match -h 0x0014 -t 17 "Memory Device: Speed: Unknown"
# * || check_dmi_data_match -h 0x0014 -t 17 "Memory Device: Configured Memory Speed: Unknown"
# * || check_dmi_data_match -h 0x0014 -t 17 "Memory Device: Firmware Version: Not Specified"
# * || check_dmi_data_match -h 0x0017 -t 17 "Memory Device: Speed: Unknown"
# * || check_dmi_data_match -h 0x0017 -t 17 "Memory Device: Configured Memory Speed: Unknown"
# * || check_dmi_data_match -h 0x0017 -t 17 "Memory Device: Firmware Version: Not Specified"


#######################################################################
###
### Filesystem checks
###
 * || check_fs_mount_rw -t "sysfs" -s "sysfs" -f "/sys"
 * || check_fs_mount_rw -t "proc" -s "proc" -f "/proc"
 * || check_fs_mount_rw -t "devtmpfs" -s "devtmpfs" -f "/dev"
 * || check_fs_mount_rw -t "securityfs" -s "securityfs" -f "/sys/kernel/security"
 * || check_fs_mount_rw -t "tmpfs" -s "tmpfs" -f "/dev/shm"
 * || check_fs_mount_rw -t "devpts" -s "devpts" -f "/dev/pts"
 * || check_fs_mount_rw -t "tmpfs" -s "tmpfs" -f "/run"
 * || check_fs_mount_ro -t "tmpfs" -s "tmpfs" -f "/sys/fs/cgroup"
 * || check_fs_mount_rw -t "pstore" -s "pstore" -f "/sys/fs/pstore"
 * || check_fs_mount_rw -t "efivarfs" -s "efivarfs" -f "/sys/firmware/efi/efivars"
 * || check_fs_mount_rw -t "configfs" -s "configfs" -f "/sys/kernel/config"
 * || check_fs_mount_rw -t "xfs" -s "/dev/sda2" -f "/"
 * || check_fs_mount_rw -t "selinuxfs" -s "selinuxfs" -f "/sys/fs/selinux"
 * || check_fs_mount_rw -t "debugfs" -s "debugfs" -f "/sys/kernel/debug"
 * || check_fs_mount_rw -t "hugetlbfs" -s "hugetlbfs" -f "/dev/hugepages"
 * || check_fs_mount_rw -t "mqueue" -s "mqueue" -f "/dev/mqueue"
 * || check_fs_mount_rw -t "xfs" -s "/dev/sda1" -f "/boot"
 * || check_fs_mount_rw -t "vfat" -s "/dev/sda15" -f "/boot/efi"
 * || check_fs_mount_rw -t "ext4" -s "/dev/sdb1" -f "/mnt/resource"
 * || check_fs_mount_rw -t "nfs4" -s "*:/sched" -f "/sched"
 * || check_fs_mount_rw -t "nfs" -s "*:/*" -f "/shared"
 * || check_fs_mount_rw -t "xfs" -s "/dev/*" -f "/mnt/resource_nvme"
 * || check_fs_used /dev 90%
 * || check_fs_used / 90%
 * || check_fs_free /boot 40MB
 * || check_fs_used /boot/efi 90%
 * || check_fs_used /mnt/resource 90%
 * || check_fs_used /apps 90%
 * || check_fs_used /sched 90%
 * || check_fs_used /shared 90%
 * || check_fs_used /mnt/resource_nvme 90%
 * || check_fs_iused /dev 98%
 * || check_fs_iused / 100%
 * || check_fs_iused /boot 100%
 * || check_fs_iused /mnt/resource 100%
 * || check_fs_iused /apps 100%
 * || check_fs_iused /sched 100%
 * || check_fs_iused /shared 100%
 * || check_fs_iused /mnt/resource_nvme 98%


#######################################################################
###
### Hardware checks
###
 * || check_hw_cpuinfo 2 96 96
 * || check_hw_physmem 462135096kB 462135096kB 3%
 * || check_hw_swap 0kB 0kB 3%
 * || check_hw_ib 40 mlx5_an0:1
 * || check_hw_ib 200 mlx5_ib0:1
 * || check_hw_eth eth0
 * || check_hw_eth eth1
 * || check_hw_eth eth2
 * || check_hw_eth lo
 * || check_hw_eth ib0
 * || check_hw_eth docker0


#######################################################################
###
### Process checks
###
 * || check_ps_loadavg 192
 * || check_ps_service -r rpcbind
 * || check_ps_service -r -d qmgr postfix
 * || check_ps_service -S -u root atd
 * || check_ps_service -S -u root crond
 * || check_ps_service -S -u root sshd
 * || check_ps_service -r -d rpc.statd nfslock
 * || check_ps_service -S -d rsyslogd -u root rsyslog


#######################################################################
####
#### Additional memory checks
####
 * || check_cpu_drop_mem_cache 1000000
